var cos,pig,spaceKey,jumpSound,falling,getStarSound,leftarrow,rightarrow,heart,background,textLives,scoreText,levelText,totalScoreText,getItem,points,machines,spacekey,hearts,stars,game=new Phaser.Game(1820,600,Phaser.CANVAS,"game",{preload:preload,create:create,update:update}),len=1,lives=3,score=0,totalScore=0,level=1,progressStarPos=350,fontColor="#25A2F4",Table=new Array("1","2","3"),bodyVel=-500,bgVel=2,levelPoints=0,timeSinceLastIncrement=0;function init(){game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,game.scale.setScreenSize(!0),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=100}function preload(){init(),this.load.spritesheet("pig","https://rawgit.com/MEJSIK/Game/master/pig.png",108,60,6),this.load.spritesheet("mach1","https://rawgit.com/MEJSIK/Game/master/mach1.png",400,450,53),this.load.spritesheet("mach2","https://rawgit.com/MEJSIK/Game/master/mach2.png",500,500,16),this.load.spritesheet("mach3","https://rawgit.com/MEJSIK/Game/master/mach3.png",650,411,6),this.load.spritesheet("mach4","https://rawgit.com/MEJSIK/Game/master/mach4.png",500,500,56),this.load.spritesheet("mach5","https://rawgit.com/MEJSIK/Game/master/mach5.png",300,449,12),this.load.image("background","https://rawgit.com/MEJSIK/Game/master/Asset%205.png"),this.load.image("heart","https://rawgit.com/MEJSIK/Game/master/heart.png"),this.load.image("star","https://static1.squarespace.com/static/544c1964e4b0dd27d701dd68/t/55f85ed4e4b0f3e154b9ecb0/1442340582763/"),game.load.audio("jump","https://rawgit.com/MEJSIK/Game/master/flyUp.mp3"),game.load.audio("falling","https://rawgit.com/MEJSIK/Game/master/endLife.mp3"),game.load.audio("getStar","https://rawgit.com/MEJSIK/Game/master/getStar.mp3")}function create(){game.physics.startSystem(Phaser.Physics.ARCADE),game.world.setBounds(0,0,1820,600),(spacekey=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)).onDown.add(jump,this),leftarrow=game.input.keyboard.addKey(Phaser.Keyboard.LEFT),rightarrow=game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),background=this.add.tileSprite(0,0,this.stage.bounds.width,this.cache.getImage("background").height,"background"),this.game.physics.arcade.enable(background),background.body.allowGravity=!1,(pig=this.add.sprite(60,this.world.centerY,"pig")).animations.add("fly"),pig.animations.play("fly",20,!0),pig.anchor.setTo(.5,.5),this.game.physics.arcade.enable(pig),pig.body.gravity.y=1e3,(machines=game.add.group()).callAll("anchor.setTo","anchor",.5),(stars=game.add.group()).enableBody=!0;var e=game.add.graphics(0,0);e.beginFill(2761796),e.moveTo(0,0),e.lineTo(1820,0),e.lineTo(1820,100),e.lineTo(0,100),e.lineTo(0,0),e.endFill(),window.graphics=e;var a=game.add.graphics(0,0);a.beginFill(15747067),a.lineStyle(2,13280,1),a.moveTo(64,55),a.lineTo(700,55),a.endFill(),window.graphics=a,scoreText=game.add.text(170,16,"0",{fontSize:"32px",fill:fontColor}),totalScoreText=game.add.text(300,16,"TOTAL SCORE: 0",{fontSize:"32px",fill:fontColor}),levelText=game.add.text(game.world.centerX-50,50,"Level "+level,{fontSize:"120",fill:"#fff"}),game.add.sprite(64,16,"heart").scale.setTo(.3),game.add.sprite(128,16,"star").scale.setTo(.1),textLives=game.add.text(85,25,"x"+lives,{fontSize:"16px",fill:fontColor}),this.jumpSound=game.add.audio("jump"),this.jumpSound.volume=.2,this.getStarSound=game.add.audio("getStar"),this.getStarSound.volume=.2}function update(){this.game.input.onDown.add(jump,this),leftarrow.isDown?pig.x-=2:rightarrow.isDown&&(pig.x+=2),background.tilePosition.x-=bgVel,pig.angle<20&&(pig.angle+=1),pig.y>600&&(--lives<0?(game.paused=!0,restartGame()):(textLives.setText("x"+lives),pig.y=300)),(timeSinceLastIncrement+=game.time.elapsed)%10==0&&(timeSinceLastIncrent=0,createStar()),timeSinceLastIncrement>=2e3&&(timeSinceLastIncrement=0,createMachine()),game.physics.arcade.overlap(pig,stars,collisionHandler,null,this),machines.x-=4}function createMachine(){switch(game.rnd.integerInRange(0,4)){case 0:(e=machines.create(game.width*len*.5,100,"mach1",0)).scale.setTo(.7),e.animations.add("move",null,7,!0,!0),e.animations.play("move",!0),len++;break;case 1:(e=machines.create(game.width*len*.5,250,"mach2",0)).scale.setTo(.7),e.animations.add("move",null,7,!0,!0),e.animations.play("move",!0),len++;break;case 2:(e=machines.create(game.width*len*.5,320,"mach3",0)).scale.setTo(.7),e.animations.add("move",null,7,!0,!0),e.animations.play("move",!0),len++;break;case 3:(e=machines.create(game.width*len*.5,250,"mach4",0)).scale.setTo(.7),e.animations.add("move",null,7,!0,!0),e.animations.play("move",!0),len++;break;case 4:var e;(e=machines.create(game.width*len*.5,300,"mach5",0)).scale.setTo(.7),e.animations.add("move",null,7,!0,!0),e.animations.play("move",!0),len++}}function createStar(){var e=stars.create(game.width,150+game.world.randomY,"star");e.scale.setTo(.1),moveIndividual(e)}function moveIndividual(e){e.body.velocity.x=bodyVel}function collisionHandler(e,a){this.getStarSound.play(),a.kill(),score+=10,totalScore+=10,scoreText.setText(score),totalScoreText.setText("TOTAL SCORE:"+totalScore),score>=400*level&&(level++,levelText.setText("Level"+level),bodyVel-=200,bgVel*=2,score=0)}function jump(){this.jumpSound.play(),pig.body.velocity.y=-350,game.add.tween(pig).to({angle:-20},100).start()}function restartGame(){game.add.text(game.world.centerX,game.world.centerY,"Press ENTER to start game again !!!",{fontSize:"120",fill:"#fff"}).anchor.setTo(.5);game.input.keyboard.onUpCallback=function(e){},this.game.input.onDown.add(function(){game.paused=!1,game.state.restart(),lives=3,level=1,bodyVel=-500,bgVel=2})}